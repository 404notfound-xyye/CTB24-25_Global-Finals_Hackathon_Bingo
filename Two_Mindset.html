<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BINGO | Growth Mindset</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <style>
    :root {
      --cell-size: 10rem;
      --font-size: 1.2rem;
      --gap-size: 0.5rem;
      --primary-color: #4caf50;
      --text-color: #fff;
      --border-color: #ccc;
      --completed-border: #388e3c;
      --checkmark-size: 2rem;
      --bingo-font-size: 1.2rem;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background-color: #f5f5f5;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    header, footer {
      text-align: center;
      padding: 1rem;
      background-color: #e0e0e0;
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
      max-width: 1000px;
      margin: 0 auto;
    }

    .game-title {
      font-size: 2rem;
      margin: 0.5rem 0;
    }

    #bingo-count {
      font-size: var(--bingo-font-size);
      margin-bottom: 1rem;
      display: none;
    }

    .bingo-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(3rem, var(--cell-size)));
      grid-auto-rows: minmax(3rem, var(--cell-size));
      gap: var(--gap-size);
      margin-bottom: 1rem;
      width: 100%;
      max-width: calc(var(--cell-size) * 3 + var(--gap-size) * 2);
      justify-content: center;
      margin-left: auto;
      margin-right: auto;
    }

    .cell {
      perspective: 1000px;
      cursor: pointer;
    }

    .card {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }

    .cell.selected .card {
      transform: rotateY(180deg);
    }

    .front, .back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: var(--font-size);
      padding: 0.5rem;
      background-color: #fff;
      border: 2px solid var(--border-color);
      word-break: break-word;
    }

    .back {
      background-color: var(--primary-color);
      color: var(--text-color);
      transform: rotateY(180deg);
    }

    button {
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      border: none;
      border-radius: 0.3rem;
      cursor: pointer;
      margin: 0.5rem;
    }

    #reset-button {
      background-color: #d32f2f;
      color: white;
    }

    #reset-button:hover {
      background-color: #b71c1c;
    }

    #done-button {
      background-color: #388e3c;
      color: white;
    }

    #done-button:hover {
      background-color: #2e7d32;
    }

    footer p {
      font-size: 0.9rem;
      color: #666;
      margin: 1rem 0 0 0;
    }

    .bingo-line {
        position: absolute;
        height: 4px;
        background: red;
        z-index: 10;
        animation: glow 1s ease-in-out infinite alternate;
    }

    .bingo-line.row-0 { top: 18%; left: 10%; right: 10%; }
    .bingo-line.row-1 { top: 48%; left: 10%; right: 10%; }
    .bingo-line.row-2 { top: 78%; left: 10%; right: 10%; }

    .bingo-line.col-0 {
        top: 10%;
        bottom: 10%;
        left: 18%;
        width: 4px;
        background: blue;
    }
    .bingo-line.col-1 {
        top: 10%;
        bottom: 10%;
        left: 48%;
        width: 4px;
        background: blue;
    }
    .bingo-line.col-2 {
        top: 10%;
        bottom: 10%;
        left: 78%;
        width: 4px;
        background: blue;
    }

    .bingo-line.diag-main {
        top: 10%;
        left: 10%;
        width: 80%;
        height: 4px;
        background: green;
        transform: rotate(45deg);
        transform-origin: top left;
    }

    .bingo-line.diag-anti {
        top: 10%;
        right: 10%;
        width: 80%;
        height: 4px;
        background: green;
        transform: rotate(-45deg);
        transform-origin: top right;
    }

    @keyframes glow {
        from {
            box-shadow: 0 0 5px #ff4081, 0 0 10px #ff4081;
        }
        to {
            box-shadow: 0 0 20px #ff4081, 0 0 30px #ff4081;
        }
    }

    .percent-note {
        margin-top: 0.5rem;
        font-size: 0.9rem;
        color: #ffe082;
        animation: fadeIn 1s ease-in forwards;
        opacity: 0;
    }

    @keyframes fadeIn {
        to {
            opacity: 1;
        }
    }
  </style>
</head>
<body>
  <header>
    <h1 class="game-title">“I’m Becoming Who I’m Meant to Be” – A Growth Mindset Pathway to Self-Affirmation</h1>
  </header>

  <main>
    <div id="bingo-count">Bingo: 0</div>
    <div id="bingo-grid" class="bingo-grid"></div>
    <button id="done-button">DONE</button>
    <button id="reset-button">RESET</button>
  </main>

  <footer>
    <p>© CTB24-25 Hackathon Group No. H130</p>
    <p><a href="https://github.com/404notfound-xyye/CTB24-25_Global-Finals_Hackathon_Bingo">Source Code</a></p>
  </footer>

  <script>
    const gridSize = 3;
    const grid = document.getElementById('bingo-grid');
    const bingoCountEl = document.getElementById('bingo-count');
    const resetBtn = document.getElementById('reset-button');
    const doneBtn = document.getElementById('done-button');

    const cellFrontTexts = [
    'I’m getting better every day', 'I deserve this opportunity', 'It’s okay to ask for help',
    'I failed, but I learned from it', 'This isn’t luck – I worked for it', 'I’m still learning',
    'I acknowledge my own worth', 'Everyone feels unsure sometimes', 'I’m proud of myself'
    ];

    const cellBackTexts = [
    'Growth takes time', 'You earned your place', 'Support builds strength',
    'Failure is feedback', 'Hard work pays off', 'Learning is progress',
    'You have value', 'Doubt is human', 'Celebrate progress'
    ];

    // Mock percentage data
    const percentageData = [
    67, 45, 82,
    39, 71, 58,
    64, 47, 75
    ];

    let completed = [];
    let gameDone = false;

    function initGame() {
    grid.innerHTML = '';
    bingoCountEl.innerText = '';
    completed = Array.from({ length: gridSize }, () => Array(gridSize).fill(false));
    gameDone = false;

    for (let i = 0; i < gridSize * gridSize; i++) {
        const cell = document.createElement('div');
        cell.className = 'cell';

        const card = document.createElement('div');
        card.className = 'flip-card-inner';

        const front = document.createElement('div');
        front.className = 'flip-card-front';
        front.innerText = cellFrontTexts[i];

        const back = document.createElement('div');
        back.className = 'flip-card-back';
        back.innerText = cellBackTexts[i];

        const percentNote = document.createElement('div');
        percentNote.className = 'percent-note';
        percentNote.innerText = `${percentageData[i]}% of people also felt this`;
        percentNote.style.display = 'none';
        back.appendChild(percentNote);

        card.appendChild(front);
        card.appendChild(back);
        cell.appendChild(card);

        const row = Math.floor(i / gridSize);
        const col = i % gridSize;

        cell.addEventListener('click', () => {
        if (!gameDone) {
            completed[row][col] = !completed[row][col];
            cell.classList.toggle('completed');
        }
        });

        grid.appendChild(cell);
    }
    }

    function showBingoLines(bingos) {
    bingos.forEach((type, idx) => {
        const line = document.createElement('div');
        line.classList.add('bingo-line', type);
        line.style.setProperty('--index', idx);
        document.body.appendChild(line);
    });
    }

    function updateBingoCount() {
    let count = 0;
    const bingos = [];

    for (let row = 0; row < gridSize; row++) {
        if (completed[row].every(c => c)) {
        count++;
        bingos.push(`row-${row}`);
        }
    }

    for (let col = 0; col < gridSize; col++) {
        if (completed.every(row => row[col])) {
        count++;
        bingos.push(`col-${col}`);
        }
    }

    if ([0, 1, 2].every(i => completed[i][i])) {
        count++;
        bingos.push('diag-main');
    }
    if ([0, 1, 2].every(i => completed[i][gridSize - 1 - i])) {
        count++;
        bingos.push('diag-anti');
    }

    if (count > 0) {
        bingoCountEl.innerHTML = `<span class="bingo-highlight">Bingo: ${count}</span>`;
        showBingoLines(bingos);
    } else {
        bingoCountEl.innerText = 'Bingo: 0';
    }
    }

    resetBtn.addEventListener('click', () => {
    document.querySelectorAll('.bingo-line').forEach(e => e.remove());
    initGame();
    });

    doneBtn.addEventListener('click', () => {
    gameDone = true;
    document.querySelectorAll('.cell').forEach((cell, i) => {
        cell.classList.add('flipped');
        if (cell.classList.contains('completed')) {
        const percentNote = cell.querySelector('.percent-note');
        if (percentNote) {
            percentNote.style.display = 'block';
        }
        }
    });
    updateBingoCount();
    });

    initGame();
  </script>
</body>
</html>
